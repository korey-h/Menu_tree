# TREE MENU
## Описание
Приложение django для вывода древовидного меню на вэб-странице.

## Постановка задачи
Нужно django app, которое будет реализовывать древовидное меню, соблюдая следующие условия:
1) меню реализовано через template tag;
2) активный пункт меню определяется по URL текущей страницы;
3) всё, что над активным пунктом, развернуто; первый уровень вложенности под активным пунктом тоже развернут;
4) меню хранится в БД;
5) меню редактируется в стандартной админке Django;
6) на одной вэб-странице может быть несколько меню (они определяются по названию);
7) при клике по пункту меню происходит переход по заданному в нем URL;
8) на отрисовку каждого меню требуется ровно 1 запрос к БД.

## Реализация
Реализованное приложение называется draw_menu.
Для его использования в шаблоне страницы необходимо подгрузить библиотеку тэгов данного приложения: {%load custom_tags %}
и в нужном месте шаблона страницы разместить запись вида:  {% draw_menu 'main_menu' %},
где draw_menu - названия тэга, через которое вызывается отрисока меню с именем 'main_menu' (пример использования показан в templates/base.html).
Имя меню определяется его корневым пунктом: именем меню является значение поля 'slug' объекта модели Tags, у которого поле 'parent' пустое.

Вид (раскрытость) меню на странице определяется адресом страницы:
- если адрес принадлежит одному из пунктов меню, то меню раскрыто до этого пункта и дополнительно отображены подпункты данного пункта;
- если адрес не принадлежит ни одному из пунктов меню, то будет отображено только название меню и его подпункты первого уровня вложенности.

Меню формируется через стандартную админ-панель Django путем создания отдельных пунктов и задания связей между ними (в параметрах каждого пункта указывается вышестоящий пункт меню). Пункт, у которого отсутствут вышестоящий пункт, является корневым и определяет название меню.

При создании пункта меню связанный с ним адрес можно задать вручную или автоматически. Для автоформирования адреса используется адрес вышестоящего пункта и значение поля 'slug' создаваемого (редактируемого) пункта.

Если при редактировании свойств пункта в качесте вышестоящего для него выбрать его самого,то при попытке сохранения изменений на вэб-страницу будет 
будет возвращено сообщение об ошибке. То же самое произойдет, если в качестве вышестоящего выбрать пункт, который в иерархии меню располагается ниже редактируемого пункта.

Получение данных для отрисовки одного меню осуществляется за один запрос к БД при помощи raw query.


